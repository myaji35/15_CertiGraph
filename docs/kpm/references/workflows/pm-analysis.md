# PM Analysis Capabilities

PM의 세 가지 핵심 분석 역량에 대한 상세 가이드.

## 1. 정의 누락 감지 (Missing Definition Detection)

### 철학
> "명확하지 않은 것은 반드시 문제를 일으킨다"

30년차 PM은 모호함이 프로젝트 실패의 주요 원인임을 안다. 
코드 한 줄 작성 전에 정의를 완성하는 것이 10배 효율적이다.

### 감지 체크리스트

#### 요구사항 레벨
```markdown
□ 정량적 기준 존재
  - ❌ "빠르게 로딩되어야 함"
  - ✅ "페이지 로딩 2초 이내 (p95)"

□ 주어/목적어 명확
  - ❌ "데이터를 처리한다"
  - ✅ "백엔드 서버가 주문 데이터를 검증한다"

□ 예외 상황 정의
  - ❌ "로그인 기능"
  - ✅ "로그인 실패 시 3회 후 5분 잠금"

□ 용어 정의
  - ❌ "활성 사용자"
  - ✅ "활성 사용자: 최근 30일 내 1회 이상 로그인한 사용자"
```

#### 설계 레벨
```markdown
□ 상태 다이어그램 완성
  - 모든 상태 전이 정의
  - 비정상 전이 처리 정의

□ API 계약 명확
  - Request/Response 스키마
  - 에러 코드 및 메시지
  - 타임아웃 정책

□ 데이터 정의
  - 필드별 유효성 규칙
  - Null 허용 여부
  - 기본값
```

#### 프로세스 레벨
```markdown
□ 담당자 지정
□ 완료 기준 (DoD)
□ 승인 프로세스
□ 롤백 절차
```

### 모호성 패턴 사전

| 모호한 표현 | 개선 질문 |
|------------|----------|
| "적절한" | 구체적 수치는? |
| "빠른" | 몇 초/밀리초? |
| "많은" | 몇 개 이상? |
| "사용자 친화적" | 어떤 UX 기준? |
| "안전한" | 어떤 보안 기준? |
| "필요시" | 어떤 조건에서? |
| "등등" | 전체 목록은? |
| "가능하면" | 필수인가 선택인가? |
| "대부분" | 몇 %? |
| "간단한" | 어떤 복잡도? |

### 감지 스크립트 연동

```bash
# 요구사항 문서 분석
python scripts/detect_missing.py docs/requirements/*.md

# 출력: missing_definitions_report.md
```

---

## 2. 더 나은 기술/방법 제안 (Recommendation Engine)

### 철학
> "처음 떠오른 방법이 최선인 경우는 드물다"

경험 많은 PM은 대안을 항상 검토한다.
팀의 제안을 존중하되, 더 나은 선택지를 제시할 의무가 있다.

### 제안 프레임워크

#### Step 1: 현재 선택 이해
```markdown
## Current Approach Analysis

### 선택된 방법
[현재 기술/방법]

### 선택 이유
- [이유 1]
- [이유 2]

### 제약 조건
- [제약 1: 예산]
- [제약 2: 일정]
- [제약 3: 팀 역량]
```

#### Step 2: 대안 탐색
```markdown
## Alternative Exploration

### 탐색 영역
1. 동일 목적의 다른 기술
2. 아키텍처 패턴 변경
3. 구현 방식 변경
4. 외부 서비스 활용
5. 오픈소스 활용

### 평가 매트릭스
| 기준 | 가중치 | 현재 | 대안A | 대안B |
|------|-------|------|-------|-------|
| 성능 | 25% | 7 | 9 | 6 |
| 비용 | 20% | 8 | 5 | 9 |
| 유지보수 | 20% | 6 | 8 | 7 |
| 보안 | 15% | 7 | 8 | 7 |
| 학습곡선 | 10% | 9 | 5 | 8 |
| 생태계 | 10% | 8 | 9 | 6 |
| **총점** | 100% | 7.2 | 7.4 | 7.1 |
```

#### Step 3: 제안 작성
```markdown
## Recommendation

### 권장안: [대안A]

### 근거
1. [정량적 근거]
2. [정성적 근거]

### 전환 비용
- 학습: [예상 시간]
- 마이그레이션: [예상 공수]
- 리스크: [식별된 리스크]

### 조건부 권장
- IF [조건1] THEN [대안A]
- IF [조건2] THEN [현재 유지]
```

### 제안 영역별 체크리스트

#### 기술 스택
```markdown
□ 언어/프레임워크 대안
□ 데이터베이스 선택
□ 캐시 전략
□ 메시지 큐 선택
□ 클라우드 서비스
```

#### 아키텍처
```markdown
□ 모놀리스 vs 마이크로서비스
□ 동기 vs 비동기
□ 이벤트 드리븐 적용
□ CQRS/Event Sourcing
□ 캐싱 레이어
```

#### 프로세스
```markdown
□ 배포 전략 (Blue-Green, Canary)
□ 테스트 자동화 범위
□ 모니터링 도구
□ 협업 도구
```

---

## 3. 엣지 케이스 발견 (Edge Case Discovery)

### 철학
> "버그는 경계에서 태어난다"

프로덕션 장애의 80%는 엣지 케이스에서 발생한다.
사전에 발견하면 수정 비용이 1/100로 줄어든다.

### 엣지 케이스 탐색 매트릭스

#### 데이터 경계
```markdown
| 구분 | 테스트 값 | 예시 |
|------|----------|------|
| Zero | 0 | 수량 0개 주문 |
| One | 1 | 단일 아이템 |
| Min | 최소값 | 가격 1원 |
| Max | 최대값 | INT_MAX |
| Max+1 | 초과값 | 오버플로우 |
| Empty | 빈 값 | 빈 문자열, 빈 배열 |
| Null | null | 미입력 |
| Special | 특수값 | NaN, Infinity |
```

#### 상태 전이
```markdown
| 현재 상태 | 이벤트 | 예상 동작 | 엣지 케이스 |
|----------|--------|----------|------------|
| 대기 | 시작 | 진행중 | 이미 진행중이면? |
| 진행중 | 완료 | 완료 | 두 번 완료하면? |
| 완료 | 취소 | ? | 완료 후 취소 가능? |
| 취소 | 시작 | ? | 취소된 것 재시작? |
```

#### 동시성
```markdown
| 시나리오 | 발생 조건 | 영향 | 대응 |
|---------|----------|------|------|
| Lost Update | 동시 수정 | 데이터 유실 | 낙관적 락 |
| Dirty Read | 미커밋 읽기 | 잘못된 데이터 | 격리 수준 |
| Double Submit | 중복 클릭 | 중복 처리 | 멱등성 키 |
| Race Condition | 순서 의존 | 일관성 깨짐 | 트랜잭션 |
```

#### 시간 관련
```markdown
| 시나리오 | 예시 |
|---------|------|
| 자정 처리 | 23:59:59 → 00:00:00 |
| 일광절약시간 | 시계 1시간 이동 |
| 윤년/윤초 | 2월 29일, 60초 |
| 시간대 | UTC vs Local |
| 타임아웃 | 응답 지연 |
| 만료 | 세션/토큰 만료 시점 |
```

#### 외부 의존성
```markdown
| 실패 유형 | 시나리오 | 대응 전략 |
|----------|---------|----------|
| Timeout | 응답 지연 | 재시도 + 폴백 |
| Error | 5xx 응답 | 서킷브레이커 |
| Invalid | 잘못된 응답 | 검증 + 로깅 |
| Unavailable | 서비스 다운 | 그레이스풀 디그레이드 |
| Rate Limit | 한도 초과 | 큐잉 + 백오프 |
```

### 기능별 엣지 케이스 템플릿

#### 로그인 기능
```markdown
## Edge Cases: 로그인

### 입력
- 이메일에 특수문자 포함 (user+tag@domain.com)
- 패스워드 최대 길이 초과
- 이메일/패스워드 빈 값
- SQL 인젝션 시도
- 공백만 있는 입력

### 상태
- 이미 로그인된 상태에서 재로그인
- 탈퇴한 계정으로 로그인
- 잠긴 계정으로 로그인
- 비활성화된 계정

### 동시성
- 동시 다중 디바이스 로그인
- 로그인 중 비밀번호 변경
- 세션 만료 직전 요청

### 외부
- OAuth 제공자 다운
- 이메일 발송 실패 (비밀번호 찾기)
```

#### 결제 기능
```markdown
## Edge Cases: 결제

### 금액
- 0원 결제
- 소수점 금액 (외화)
- 최대 금액 초과
- 음수 금액 (환불 케이스)

### 상태
- 결제 중 세션 만료
- 중복 결제 시도
- 결제 성공 후 즉시 취소
- 부분 취소 후 재취소

### 동시성
- 동일 상품 동시 구매 (재고 1개)
- 결제 중 가격 변경
- 결제 중 쿠폰 만료

### 외부
- PG사 타임아웃
- 카드사 점검 시간
- 은행 시스템 오류
```

---

## 통합 분석 워크플로우

### 새 기능 분석 프로세스

```
1. 요구사항 입력
   ↓
2. @detect:missing → 정의 누락 식별
   ↓
3. 누락 항목 보완 (RA 협업)
   ↓
4. @recommend → 구현 방법 제안
   ↓
5. 기술 결정 (SA 협업)
   ↓
6. @edge-case → 예외 상황 발굴
   ↓
7. 테스트 케이스 반영 (QA 협업)
   ↓
8. 구현 시작
```

### 분석 결과 추적

```markdown
## Analysis Tracking: [기능명]

| ID | 유형 | 내용 | 상태 | 담당 |
|----|------|------|------|------|
| MD-001 | Missing | 타임아웃 미정의 | Resolved | SA |
| RC-001 | Recommend | Redis 캐시 적용 | Accepted | BE |
| EC-001 | Edge | 동시 수정 처리 | In Progress | DBA |
```

### 품질 게이트 연동

```markdown
## Pre-Development Gate

분석 완료 기준:
- [ ] Missing Definition: Critical 0, Warning 해결
- [ ] Recommendation: 기술 결정 완료
- [ ] Edge Case: Critical 모두 테스트 케이스화

통과 시 개발 시작 승인
```
