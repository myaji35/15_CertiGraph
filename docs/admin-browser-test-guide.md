# Admin 기능 브라우저 테스트 가이드

**테스트 일시**: 2026-01-18  
**테스터**: 사용자  
**목적**: P0-P1 Admin 기능 수동 테스트

---

## 🚀 사전 준비

### 1. 서버 시작
```bash
cd certigraph
bin/rails server -p 3001
```

### 2. 브라우저 접속
```
http://localhost:3001/admin/questions
```

---

## ✅ P0 테스트: 인증/권한 (Critical)

### TC-ADMIN-001: 일반 사용자 접근 차단

**목적**: 관리자가 아닌 사용자의 Admin 페이지 접근 차단

**테스트 단계**:
1. [ ] 일반 사용자로 로그인 (또는 비로그인 상태)
2. [ ] 브라우저 주소창에 입력: `http://localhost:3001/admin/questions`
3. [ ] Enter 키 입력

**예상 결과**:
- ✅ 루트 페이지(`/`)로 리다이렉트
- ✅ 경고 메시지 표시: "관리자 권한이 필요합니다."

**실제 결과**:
- [ ] 성공
- [ ] 실패 (버그 발견)

**버그 내용** (실패 시):
```
[여기에 버그 상세 내용 기록]
```

---

### TC-ADMIN-002: 관리자 접근 허용

**목적**: 관리자 사용자의 Admin 페이지 접근 허용

**전제조건**:
- DB에 admin = true인 사용자 존재
- 해당 사용자로 로그인

**테스트 단계**:
1. [ ] 관리자 사용자로 로그인
2. [ ] `http://localhost:3001/admin/questions` 접속
3. [ ] 페이지 로드 확인

**예상 결과**:
- ✅ 페이지 정상 로드
- ✅ 문제 목록 테이블 표시
- ✅ 통계 카드 표시 (전체 문제, 난이도별)
- ✅ "새 문제 추가" 버튼 표시

**실제 결과**:
- [ ] 성공
- [ ] 실패 (버그 발견)

**스크린샷**:
```
[스크린샷 첨부 또는 경로]
```

---

## ✅ P1 테스트: CRUD 기본 기능 (High)

### TC-ADMIN-101: 문제 목록 조회

**목적**: Admin 문제 목록 페이지 정상 작동 확인

**전제조건**:
- 관리자로 로그인
- DB에 최소 5개 이상의 문제 존재

**테스트 단계**:
1. [ ] `/admin/questions` 접속
2. [ ] 통계 카드 확인:
   - [ ] 전체 문제 수 표시
   - [ ] 난이도 상/중/하 개수 표시
3. [ ] 문제 테이블 확인:
   - [ ] ID 컬럼
   - [ ] 문제 내용 컬럼 (100자 제한)
   - [ ] 학습 세트 컬럼
   - [ ] 난이도 컬럼 (배지 색상 확인)
   - [ ] 주제 컬럼
   - [ ] 작업 버튼 (보기, 수정, 삭제)
4. [ ] 페이지네이션 확인 (25개 이상일 때)

**예상 결과**:
- ✅ 통계 카드 정확한 숫자 표시
- ✅ 문제 목록 테이블 정상 렌더링
- ✅ 난이도 배지 색상:
  - 1-2: 초록색 (bg-green-100)
  - 3: 노란색 (bg-yellow-100)
  - 4-5: 빨간색 (bg-red-100)
- ✅ 각 문제마다 작업 버튼 3개 표시

**실제 결과**:
- [ ] 성공
- [ ] 실패

**발견된 문제**:
```
[문제 상세 기록]
```

---

### TC-ADMIN-106: 문제 상세 조회

**목적**: 문제 상세 페이지 정상 작동 확인

**전제조건**:
- 조회할 문제 존재 (question_id = 1)

**테스트 단계**:
1. [ ] 문제 목록에서 "보기" 버튼 클릭
2. [ ] 또는 직접 `/admin/questions/1` 접속
3. [ ] 문제 정보 표시 확인:
   - [ ] 문제 ID
   - [ ] 학습 세트 이름
   - [ ] 문제 유형
   - [ ] 난이도 (배지)
   - [ ] 주제
   - [ ] 생성일
4. [ ] 문제 내용 표시 확인
5. [ ] 옵션 목록 표시 확인:
   - [ ] 4개 옵션 표시
   - [ ] 정답 옵션 초록색 배경
   - [ ] 정답 체크 표시
6. [ ] 해설 표시 확인 (있을 경우)
7. [ ] 버튼 확인:
   - [ ] "수정" 버튼
   - [ ] "삭제" 버튼
   - [ ] "목록으로" 버튼

**예상 결과**:
- ✅ 모든 정보 정확히 표시
- ✅ 정답 옵션 강조 표시
- ✅ 버튼 모두 작동

**실제 결과**:
- [ ] 성공
- [ ] 실패

---

### TC-ADMIN-102: 문제 생성 - 정상 케이스

**목적**: 새 문제 생성 기능 정상 작동 확인

**전제조건**:
- 학습 세트 존재 (study_set_id = 1)

**테스트 단계**:
1. [ ] "새 문제 추가" 버튼 클릭
2. [ ] 또는 `/admin/study_sets/1/questions/new` 접속
3. [ ] 폼 필드 입력:
   - [ ] **문제 내용**: "사회복지의 정의는?"
   - [ ] **문제 유형**: "multiple_choice" 선택
   - [ ] **난이도**: 3 선택
   - [ ] **주제**: "사회복지개론" 입력
   - [ ] **설명**: "사회복지의 기본 개념" 입력
   - [ ] **옵션 4개**:
     - 옵션 1: "개인의 복지 증진" (정답 체크 ✓)
     - 옵션 2: "국가의 경제 발전"
     - 옵션 3: "기업의 이윤 추구"
     - 옵션 4: "정치적 안정"
4. [ ] "저장" 버튼 클릭
5. [ ] 리다이렉트 확인
6. [ ] 성공 메시지 확인

**예상 결과**:
- ✅ 문제 DB에 저장됨
- ✅ 옵션 4개 저장됨
- ✅ 정답 옵션 `is_correct = true`
- ✅ 성공 메시지: "문제가 성공적으로 생성되었습니다."
- ✅ 학습 세트 페이지로 리다이렉트

**실제 결과**:
- [ ] 성공
- [ ] 실패

**SQL 검증** (Rails Console):
```ruby
# 최근 생성된 문제 확인
Question.last

# 옵션 확인
Question.last.options

# 정답 확인
Question.last.options.where(is_correct: true)
```

---

### TC-ADMIN-104: 문제 수정

**목적**: 기존 문제 수정 기능 확인

**전제조건**:
- 수정할 문제 존재 (question_id = 1)

**테스트 단계**:
1. [ ] 문제 상세 페이지에서 "수정" 버튼 클릭
2. [ ] 또는 `/admin/questions/1/edit` 접속
3. [ ] 문제 내용 수정: "사회복지의 정의는 무엇인가?"
4. [ ] 난이도 변경: 3 → 4
5. [ ] "저장" 버튼 클릭
6. [ ] 리다이렉트 확인
7. [ ] 성공 메시지 확인

**예상 결과**:
- ✅ 문제 내용 업데이트됨
- ✅ 난이도 업데이트됨
- ✅ 성공 메시지: "문제가 성공적으로 수정되었습니다."
- ✅ 문제 상세 페이지로 리다이렉트

**실제 결과**:
- [ ] 성공
- [ ] 실패

---

### TC-ADMIN-105: 문제 삭제

**목적**: 문제 삭제 기능 확인

**전제조건**:
- 삭제할 문제 존재

**테스트 단계**:
1. [ ] 문제 목록 또는 상세 페이지에서 "삭제" 버튼 클릭
2. [ ] 확인 다이얼로그 표시 확인: "정말 삭제하시겠습니까?"
3. [ ] "확인" 클릭
4. [ ] 리다이렉트 확인
5. [ ] 성공 메시지 확인
6. [ ] 문제 목록에서 해당 문제 사라짐 확인

**예상 결과**:
- ✅ 확인 다이얼로그 표시
- ✅ 문제 DB에서 삭제됨
- ✅ 연관된 옵션도 함께 삭제됨
- ✅ 성공 메시지: "문제가 삭제되었습니다."
- ✅ 학습 세트 페이지로 리다이렉트

**실제 결과**:
- [ ] 성공
- [ ] 실패

---

## 🐛 발견된 버그 목록

### Bug #1
**테스트 케이스**: TC-ADMIN-XXX  
**심각도**: Critical / High / Medium / Low  
**설명**:
```
[버그 상세 설명]
```

**재현 단계**:
1. 
2. 
3. 

**예상 동작**:
```
```

**실제 동작**:
```
```

**스크린샷/로그**:
```
```

**해결 방안**:
```
```

---

### Bug #2
...

---

## 📊 테스트 결과 요약

### 통과율
- **P0 테스트**: X / 3 (XX%)
- **P1 테스트**: X / 6 (XX%)
- **전체**: X / 9 (XX%)

### 발견된 버그
- **Critical**: X개
- **High**: X개
- **Medium**: X개
- **Low**: X개
- **총**: X개

### 다음 단계
- [ ] 발견된 버그 수정
- [ ] 재테스트
- [ ] P2 테스트 진행 (선택)

---

**테스트 완료 시간**: YYYY-MM-DD HH:MM  
**총 소요 시간**: X시간 X분
