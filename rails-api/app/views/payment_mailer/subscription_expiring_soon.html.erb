<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
    .container { max-width: 600px; margin: 0 auto; padding: 20px; }
    .header { background: #F59E0B; color: white; padding: 20px; text-align: center; }
    .content { background: #f9f9f9; padding: 20px; }
    .warning-box { background: #FEF3C7; border: 2px solid #F59E0B; padding: 15px; margin: 15px 0; border-radius: 4px; }
    .footer { text-align: center; color: #666; font-size: 12px; margin-top: 20px; }
    .button { display: inline-block; background: #F59E0B; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>구독 만료 알림</h1>
    </div>
    <div class="content">
      <p>안녕하세요, <%= @user.name || @user.email %>님!</p>

      <div class="warning-box">
        <h3>⚠️ 구독이 곧 만료됩니다</h3>
        <p><strong><%= @days_remaining %>일</strong> 후인 <strong><%= @expires_at.strftime('%Y년 %m월 %d일') %></strong>에 구독이 만료됩니다.</p>
      </div>

      <p>구독이 만료되면 다음 기능들을 이용하실 수 없게 됩니다:</p>
      <ul>
        <li>모든 학습 자료 접근</li>
        <li>지식 그래프 분석</li>
        <li>오답 노트 기능</li>
        <li>학습 통계 및 진도 관리</li>
      </ul>

      <p style="text-align: center; margin: 30px 0;">
        <a href="<%= @renew_url %>" class="button">지금 갱신하기</a>
      </p>

      <p>계속해서 ExamsGraph의 모든 기능을 이용하시려면 구독을 갱신해주세요.</p>
    </div>

    <div class="footer">
      <p>문의사항이 있으시면 <%= ENV['SUPPORT_EMAIL'] || 'support@examsgraph.com' %>으로 연락주세요.</p>
      <p>&copy; <%= Time.current.year %> ExamsGraph. All rights reserved.</p>
    </div>
  </div>
</body>
</html>
