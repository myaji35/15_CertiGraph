<!-- Enhanced Glass Morphism Card Component -->
<div class="glass-ultra group card-magnetic"
     data-controller="spotlight magnetic-card"
     data-magnetic-card-strength-value="0.3">

  <!-- Multi-layer background gradients -->
  <div class="absolute inset-0 bg-gradient-to-br from-[#137fec]/20 via-purple-500/20 to-pink-500/20 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>

  <!-- Animated border glow -->
  <div class="absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"
       style="background: linear-gradient(135deg, rgba(19, 127, 236, 0.5), rgba(168, 85, 247, 0.5), rgba(236, 72, 153, 0.5));
              padding: 1px;
              -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
              -webkit-mask-composite: xor;
              mask-composite: exclude;">
  </div>

  <!-- Shimmer effect on top -->
  <div class="absolute top-0 left-0 w-full h-1 overflow-hidden rounded-t-2xl">
    <div class="h-full bg-gradient-to-r from-transparent via-white/50 to-transparent animate-shimmer"></div>
  </div>

  <!-- Content area with parallax depth -->
  <div class="relative z-10 p-6 card-content" style="transform-style: preserve-3d;">
    <!-- Icon and badge section -->
    <div class="flex items-start justify-between mb-4">
      <!-- Icon with glow effect -->
      <div class="p-3 bg-white/10 backdrop-blur-sm rounded-xl transition-all duration-300 group-hover:bg-white/20 group-hover:shadow-lg group-hover:shadow-white/20"
           style="transform: translateZ(20px);">
        <span class="material-symbols-outlined text-2xl text-white transition-transform duration-300 group-hover:scale-110 group-hover:rotate-12">
          <%= local_assigns[:icon] || 'auto_awesome' %>
        </span>
      </div>

      <!-- Badge with pulse animation -->
      <% if local_assigns[:badge] %>
        <div class="px-3 py-1 bg-gradient-to-r from-[#137fec] to-purple-500 rounded-full relative overflow-hidden"
             style="transform: translateZ(20px);">
          <div class="absolute inset-0 shimmer-rainbow opacity-0 group-hover:opacity-100"></div>
          <span class="text-white text-xs font-bold uppercase tracking-wider relative z-10"><%= badge %></span>
        </div>
      <% end %>
    </div>

    <!-- Title with gradient animation -->
    <h3 class="text-xl font-bold text-white mb-2 gradient-text transition-all duration-300 group-hover:scale-105"
        style="transform: translateZ(30px); transform-origin: left center;">
      <%= title %>
    </h3>

    <!-- Description -->
    <p class="text-white/80 text-sm mb-4 transition-colors duration-300 group-hover:text-white/90"
       style="transform: translateZ(25px);">
      <%= description %>
    </p>

    <!-- Enhanced action button with ripple -->
    <% if local_assigns[:action_path] %>
      <%= link_to action_path,
          class: "inline-flex items-center gap-2 px-4 py-2 bg-white/20 backdrop-blur rounded-lg transition-all duration-300 group/btn btn-ripple overflow-hidden relative",
          style: "transform: translateZ(35px);",
          data: { turbo: false } do %>
        <!-- Button background hover effect -->
        <div class="absolute inset-0 bg-white/10 opacity-0 group-hover/btn:opacity-100 transition-opacity duration-300"></div>

        <span class="text-white font-medium relative z-10 transition-all duration-300 group-hover/btn:tracking-wide">
          <%= action_text || "시작하기" %>
        </span>
        <span class="material-symbols-outlined text-white text-lg relative z-10 transition-all duration-500 group-hover/btn:translate-x-2 group-hover/btn:scale-110">
          arrow_forward
        </span>
      <% end %>
    <% end %>

    <!-- Floating particles with staggered animation -->
    <div class="particles pointer-events-none">
      <% 8.times do |i| %>
        <div class="particle absolute w-1 h-1 bg-white/60 rounded-full"
             style="left: <%= rand(100) %>%;
                    animation: float-up <%= 8 + rand(4) %>s infinite linear;
                    animation-delay: <%= i * 1.5 %>s;
                    filter: blur(1px);"></div>
      <% end %>
    </div>
  </div>

  <!-- Spotlight effect that follows mouse -->
  <div class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"
       data-spotlight-target="spotlight"
       style="background: radial-gradient(600px circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
              rgba(255, 255, 255, 0.1),
              transparent 40%);"></div>
</div>

<style>
  @keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }

  .animate-shimmer {
    animation: shimmer 3s infinite;
  }

  .particles {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
  }

  .particle {
    position: absolute;
    width: 3px;
    height: 3px;
    background: rgba(255, 255, 255, 0.6);
    border-radius: 50%;
    animation: float-up 10s infinite linear;
  }

  @keyframes float-up {
    0% {
      transform: translateY(100%) scale(0);
      opacity: 0;
    }
    10% {
      opacity: 1;
      transform: scale(1);
    }
    90% {
      opacity: 1;
    }
    100% {
      transform: translateY(-100vh) scale(0);
      opacity: 0;
    }
  }
</style>