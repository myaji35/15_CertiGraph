<% if flash.any? %>
  <div class="fixed top-4 right-4 z-50 max-w-md space-y-2">
    <% flash.each do |type, message| %>
      <%
        alert_class = case type.to_sym
        when :notice, :success
          "bg-green-50 border-green-400 text-green-800"
        when :alert, :error
          "bg-red-50 border-red-400 text-red-800"
        when :warning
          "bg-yellow-50 border-yellow-400 text-yellow-800"
        else
          "bg-blue-50 border-blue-400 text-blue-800"
        end

        icon = case type.to_sym
        when :notice, :success
          "check_circle"
        when :alert, :error
          "error"
        when :warning
          "warning"
        else
          "info"
        end
      %>

      <div class="<%= alert_class %> border-l-4 p-4 rounded-lg shadow-lg animate-slide-in flex items-start"
           role="alert"
           data-controller="flash"
           data-flash-auto-dismiss-value="5000">
        <span class="material-symbols-outlined text-2xl mr-3 flex-shrink-0">
          <%= icon %>
        </span>
        <div class="flex-1">
          <p class="font-medium">
            <%= message %>
          </p>
        </div>
        <button type="button"
                class="ml-3 text-gray-400 hover:text-gray-600 transition-colors"
                data-action="click->flash#dismiss"
                aria-label="닫기">
          <span class="material-symbols-outlined text-xl">
            close
          </span>
        </button>
      </div>
    <% end %>
  </div>

  <style>
    @keyframes slide-in {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    .animate-slide-in {
      animation: slide-in 0.3s ease-out;
    }
  </style>
<% end %>
